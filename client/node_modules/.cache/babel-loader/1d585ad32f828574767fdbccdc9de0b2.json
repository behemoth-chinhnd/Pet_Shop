{"ast":null,"code":"// import \"@/assets/js/style.js\";\n// import HeaderTest from \"@/components/incfiles/HeaderTest.vue\";\nimport Paginate from 'vuejs-paginate';\nexport default {\n  name: \"ProductForm\",\n  components: {\n    Paginate\n  },\n\n  data() {\n    return {\n      search: \"\",\n      minprice: 0,\n      maxprice: 100000000,\n      pricesearch: \"\",\n      list: [],\n      products: [],\n      currentSort: \"time\",\n      currentSortDir: 1,\n      title: \"product\",\n      showFilter: false,\n      filters: ['id', 'name', 'price', 'time'],\n      operators: {\n        equal_to: '=',\n        less_than: \"<\",\n        greater_than: \">\",\n        like: \"LIKE\",\n        in: \"IN\",\n        not_in: \"NOT_IN\",\n        between: \"BETWEEN\"\n      },\n      params: {\n        page: 1,\n        per_page: 1,\n        sort_column: 'id',\n        direction: 'desc',\n        search_column: 'id',\n        search_operator: 'equal_to',\n        search_query_1: '',\n        search_query_2: ''\n      }\n    };\n  },\n\n  props: {},\n\n  created() {\n    this.getAll(); // this.showFilter()\n  },\n\n  mounted() {// this.products = this.products.sort((a, b) => a.price - b.price)\n  },\n\n  methods: {\n    clickCallback(pageNum) {\n      this.params.page = pageNum;\n      this.getAll();\n      console.log(pageNum);\n    },\n\n    prev() {\n      if (this.model.prev_page_url) {\n        this.params.page--;\n        this.getAll();\n      }\n    },\n\n    next() {\n      if (this.model.next_page_url) {\n        this.params.page--;\n        this.getAll();\n      }\n    },\n\n    changePage(page) {\n      this.params.page = page;\n      this.getAll();\n    },\n\n    getAll() {\n      console.log(this.builUrl());\n      this.$request.get(this.builUrl()).then(res => {\n        this.products = res.data; // sort price\n        // this.products = this.products.sort((a, b) => a.price - b.price);\n        // sort reverse\n\n        this.products = this.products.reverse(); //   return this.products.filter((product) => {\n        //   return product.name.toLowerCase().includes(this.search.toLowerCase());\n        // });\n      });\n    },\n\n    builUrl() {\n      // let p = this.params;\n      // return `http://localhost:8000/api/products?page=${p.page}&per_page=${p.per_page}&sort_column=${p.sort_column}&direction=${p.direction}&search_column=${p.search_column}&search_operator=${p.search_operator}&search_query_1=${p.search_query_1}&search_query_2=${p.search_query_2}`;\n      return `http://localhost:8000/api/products`;\n    },\n\n    onDelete(productId) {\n      this.$swal.fire({\n        title: \"Delete?\",\n        text: \"You won't be able to revert this!\",\n        icon: \"question\",\n        type: \"warning\",\n        showDenyButton: false,\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Yes, delete it!\",\n        cancelButtonText: \"No, cancel please!\",\n        timer: 5000 // closeOnConfirm: false,\n        // closeOnCancel: false\n\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.$request.delete(`http://localhost:8000/api/products/${productId}`).then(res => {\n            if (res.data.success) {\n              this.$swal.fire(\"Đã Xóa\", \"\", \"success\");\n              this.getAll();\n            }\n          });\n        }\n      });\n    },\n\n    sort: function (s) {\n      // if s == current sort, reverse\n      if (s === this.currentSort) {\n        this.currentSortDir = this.currentSortDir === \"asc\" ? \"desc\" : \"asc\";\n      }\n\n      this.currentSort = s;\n    },\n\n    changeCurrentDir() {\n      this.currentSortDir = -this.currentSortDir;\n    } // setTimeout(changeCurrentDir, 1000)\n\n\n  },\n  watch: {\n    currentSortDir(value) {\n      console.log(this.products);\n      this.products.sort((a, b) => this.currentSortDir);\n    }\n\n  },\n  computed: {\n    getFilter() {\n      // showFilter () {\n      return this.products.filter(post => {\n        return post.name.toLowerCase().includes(this.search.toLowerCase()) && post.price >= this.minprice && post.price <= this.maxprice;\n      }); // },\n    } // filteredList () {\n    //   return this.products.filter((post) => {\n    //     return post.name.toLowerCase().includes(this.search.toLowerCase());\n    //   },\n    //   // this.getAll()\n    //   );\n    // },\n\n\n  } // components: { HeaderApp },\n\n};","map":{"version":3,"mappings":"AAmLA;AACA;AACA;AACA;EACAA,mBADA;EAEAC;IACAC;EADA,CAFA;;EAKAC;IACA;MACAC,UADA;MAEAC,WAFA;MAGAC,mBAHA;MAIAC,eAJA;MAKAC,QALA;MAMAC,YANA;MAOAC,mBAPA;MAQAC,iBARA;MASAC,gBATA;MAUAC,iBAVA;MAWAC,wCAXA;MAYAC;QACAC,aADA;QAEAC,cAFA;QAGAC,iBAHA;QAIAC,YAJA;QAKAC,QALA;QAMAC,gBANA;QAOAC;MAPA,CAZA;MAqBAC;QACAC,OADA;QAEAC,WAFA;QAGAC,iBAHA;QAIAC,iBAJA;QAKAC,mBALA;QAMAC,2BANA;QAOAC,kBAPA;QAQAC;MARA;IArBA;EAkCA,CAxCA;;EAyCAC,SAzCA;;EA4CAC;IACA,cADA,CAGA;EAEA,CAjDA;;EAoDAC,WACA;EACA,CAtDA;;EAuDAC;IACAC;MACA;MACA;MACAC;IACA,CALA;;IAMAC;MACA;QACA;QACA;MACA;IACA,CAXA;;IAYAC;MACA;QACA;QACA;MACA;IACA,CAjBA;;IAkBAC;MACA;MACA;IACA,CArBA;;IAsBAC;MACAJ;MACA;QACA,yBADA,CAEA;QACA;QACA;;QACA,wCALA,CAMA;QACA;QAEA;MACA,CAVA;IAcA,CAtCA;;IAwCAK;MACA;MACA;MACA;IACA,CA5CA;;IA6CAC;MACA,WACAC,IADA,CACA;QACAhC,gBADA;QAEAiC,yCAFA;QAGAC,gBAHA;QAIAC,eAJA;QAKAC,qBALA;QAMAC,sBANA;QAOAC,6BAPA;QAQAC,yBARA;QASAC,oCATA;QAUAC,sCAVA;QAWAC,WAXA,CAYA;QACA;;MAbA,CADA,EAgBAC,IAhBA,CAgBAC;QACA;UACA,cACAC,MADA,CACA,iDADA,EAEAF,IAFA,CAEAG;YACA;cACA;cACA;YACA;UACA,CAPA;QAQA;MACA,CA3BA;IA4BA,CA1EA;;IA2EAC;MACA;MACA;QACA;MACA;;MACA;IACA,CAjFA;;IAkFAC;MACA;IACA,CApFA,CAqFA;;;EArFA,CAvDA;EA8IAC;IACAlD;MACA0B;MACA;IACA;;EAJA,CA9IA;EAoJAyB;IACAC;MACA;MACA;QACA;MAGA,CAJA,EAFA,CAOA;IAEA,CAVA,CAWA;IACA;IACA;IAEA;IACA;IACA;IAEA;;;EAnBA,CApJA,CAyKA;;AAzKA","names":["name","components","Paginate","data","search","minprice","maxprice","pricesearch","list","products","currentSort","currentSortDir","title","showFilter","filters","operators","equal_to","less_than","greater_than","like","in","not_in","between","params","page","per_page","sort_column","direction","search_column","search_operator","search_query_1","search_query_2","props","created","mounted","methods","clickCallback","console","prev","next","changePage","getAll","builUrl","onDelete","fire","text","icon","type","showDenyButton","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","timer","then","result","delete","res","sort","changeCurrentDir","watch","computed","getFilter"],"sourceRoot":"src/components/product","sources":["ListProduct.vue"],"sourcesContent":["<template>\r\n  <div class=\"body\">\r\n    <section id=\"main-body\">\r\n      <div class=\"pricing-header px-3 py-3 pt-md-5 pd-md-4 mx-auto text-center\">\r\n        <h2 class=\"display-4\">Product Management</h2>\r\n        <p><router-link to=\"/admin/products/create\">Add New</router-link></p>\r\n      </div>\r\n      <div class=\"container\">\r\n        <div class=\"panel-body\">\r\n          <div class=\"btn\">\r\n            <button @click=\"showFilter = !showFilter\" class=\"btn btn-primary btn-sm\">F</button>\r\n          </div>\r\n          <div v-if=\"showFilter\" class=\"filter flex-row-space-between-center\">\r\n            <div class=\"filter-column\">\r\n              <div class=\"form-group\">\r\n                <select v-model=\"params.search_column\">\r\n                  <option v-for=\"column in filters\" :value=\"column\" :key=\"column\" >{{column}}</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div class=\"filter-operator\">\r\n              <div class=\"form-group\">\r\n                <select v-model=\"params.search_operator\">\r\n                  <option v-for=\"(operator,key) in operators\" :value=\"key\" :key=\"key\"> {{operator}}</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div class=\"filter-input\" >\r\n              <div class=\"form-group\">\r\n                <input type=\"text\" class=\"form-control\" v-model=\"params.search_query_1\">\r\n              </div>\r\n            </div>\r\n            <div class=\"filter-input\" v-if=\"params.search_operator === 'between'\">\r\n              <div class=\"form-group\">\r\n                <input type=\"text\" class=\"form-control\" v-model=\"params.search_query_2\">\r\n              </div>\r\n            </div>\r\n            <div class=\"btn\">\r\n              <button @click.prevent=\"getAll()\" class=\"btn btn-primary btn-sm\">Filter</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"search-wrapper\">\r\n\r\n        <!-- <select v-for=\"\"></select> -->\r\n        <div class=\"row\">\r\n          <div class=\"col-md-3\">\r\n          <input type=\"text\" v-model=\"search\" placeholder=\"Search Name\" />\r\n          </div>        \r\n        <div class=\"col-md-9\">\r\n          Price:  from\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n              <input type=\"number\" v-model.number=\"minprice\" placeholder=\"Min Price\" />\r\n\r\n            </div>\r\n        to: \r\n        <div class=\"col-md-4\">\r\n          <input type=\"text\" v-model=\"maxprice\"  placeholder=\"Max Price..\" />\r\n            </div>\r\n          </div>\r\n          \r\n\r\n          \r\n        </div>\r\n        </div>\r\n        \r\n        \r\n          <!-- <div class=\"btn\">\r\n            <button @click=\"showFilter()\" class=\"btn btn-primary btn-sm\">Filter</button>\r\n          </div> -->\r\n        \r\n        </div>\r\n\r\n        <!-- <div class=\"wrapper\">\r\n        <div class=\"card\" v-for=\"post in filteredList\" :key=\"post\">\r\n          <a v-bind:href=\"post.link\" target=\"_blank\">\r\n            <img v-bind:src=\"post.img\" />\r\n            <small>posted by: {{ post.author }}</small>\r\n            {{ post.title }}\r\n          </a>\r\n        </div>\r\n      </div> -->\r\n      <div class=\"card-deck mb-3 text-center scroll-x\">\r\n          <table class=\"table table-primary table-bdrs-5px\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">#</th>\r\n                <th scope=\"col\">Product name</th>\r\n                <th scope=\"col\" @click=\"changeCurrentDir()\">Price</th>\r\n                <th scope=\"col\">Time</th>\r\n                <th scope=\"col\">Action</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              <tr v-for=\"(post, index) in getFilter\" :key=\"index\">\r\n                <td scope=\"row\">{{ index }}</td>\r\n                <td>{{ post.name }}</td>\r\n                <td>{{ post.price }}</td>\r\n                <td>{{ post.time }}</td>\r\n                <td class=\"gap-10px\">\r\n                  <router-link :to=\"{ name: 'product.edit', params: { id: post.id } }\">\r\n                    <b-button variant=\"primary\">\r\n                      <i class=\"fa fa-edit\"></i>\r\n                    </b-button>\r\n                  </router-link>\r\n                  <b-button variant=\"danger\" @click=\"onDelete(post.id)\">\r\n                    <i class=\"fa fa-trash\"></i>\r\n                  </b-button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div class=\"card-deck mb-3 text-center scroll-x\">\r\n          <table class=\"table table-primary table-bdrs-5px\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">#</th>\r\n                <th scope=\"col\">Product name</th>\r\n                <th scope=\"col\" @click=\"changeCurrentDir()\">Price</th>\r\n                <th scope=\"col\">Time</th>\r\n                <th scope=\"col\">Action</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              <tr v-for=\"(product, index) in products\" :key=\"index\">\r\n                <td scope=\"row\">{{ index }}</td>\r\n                <td>{{ product.name }}</td>\r\n                <td>{{ product.price }}</td>\r\n                <td>{{ product.time }}</td>\r\n                <td class=\"gap-10px\">\r\n                  <router-link :to=\"{ name: 'product.edit', params: { id: product.id } }\">\r\n                    <b-button variant=\"primary\">\r\n                      <i class=\"fa fa-edit\"></i>\r\n                    </b-button>\r\n                  </router-link>\r\n                  <b-button variant=\"danger\" @click=\"onDelete(product.id)\">\r\n                    <i class=\"fa fa-trash\"></i>\r\n                  </b-button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"panel-footer\">\r\n        <ul class=\"pagination\">\r\n          <li @click=\"prev()\"><a > prev </a></li>\r\n          <li @click=\"changePage(index)\" v-for=\"(product, index) in filters\" :key=\"index\">{{index}}</li>\r\n          <li @click=\"next()\"><a > next </a></li>\r\n\r\n        </ul>\r\n\r\n        </div>\r\n\r\n      <div class=\"panel-footer\">\r\n        <paginate\r\n    v-model=\"params.page\"\r\n    :page-count=\"2\"\r\n    :page-range=\"3\"\r\n    :margin-pages=\"2\"\r\n    :click-handler=\"clickCallback\"\r\n    :prev-text=\"'<<'\"\r\n    :next-text=\"'>>'\"\r\n    :container-class=\"'pagination'\"\r\n    :page-class=\"'page-item'\">\r\n  </paginate>\r\n      </div>\r\n      \r\n    </section>\r\n  </div>\r\n  <!-- <router-view/> -->\r\n</template>\r\n<script>\r\n// import \"@/assets/js/style.js\";\r\n// import HeaderTest from \"@/components/incfiles/HeaderTest.vue\";\r\nimport Paginate from 'vuejs-paginate';\r\nexport default {\r\n  name: \"ProductForm\",\r\n  components: {\r\n    Paginate,\r\n  },\r\n  data() {\r\n    return {\r\n      search: \"\",\r\n      minprice: 0,\r\n      maxprice: 100000000,\r\n      pricesearch: \"\",\r\n      list: [],\r\n      products: [],\r\n      currentSort: \"time\",\r\n      currentSortDir: 1,\r\n      title: \"product\",\r\n      showFilter: false,\r\n      filters: ['id', 'name', 'price', 'time'],\r\n      operators : {\r\n        equal_to: '=',\r\n        less_than: \"<\",\r\n        greater_than: \">\",\r\n        like: \"LIKE\",\r\n        in: \"IN\",\r\n        not_in: \"NOT_IN\",\r\n        between: \"BETWEEN\"\r\n      },\r\n      params: {\r\n        page: 1,\r\n      per_page: 1,\r\n      sort_column: 'id',\r\n      direction: 'desc',\r\n      search_column: 'id',\r\n      search_operator: 'equal_to',\r\n      search_query_1: '',\r\n      search_query_2: '',\r\n      }\r\n\r\n\r\n    };\r\n  },\r\n  props: {\r\n\r\n  },\r\ncreated() {\r\n    this.getAll();\r\n   \r\n      // this.showFilter()\r\n    \r\n  },\r\n   \r\n\r\n  mounted() {\r\n    // this.products = this.products.sort((a, b) => a.price - b.price)\r\n  },\r\n  methods: {\r\n    clickCallback (pageNum) {\r\n      this.params.page = pageNum;\r\n      this.getAll();\r\n      console.log(pageNum)\r\n    },\r\n    prev() {\r\n      if (this.model.prev_page_url) {\r\n        this.params.page--;\r\n        this.getAll();\r\n      }\r\n    },\r\n    next() {\r\n      if (this.model.next_page_url) {\r\n        this.params.page--;\r\n        this.getAll();\r\n      }\r\n    },\r\n    changePage (page){\r\n      this.params.page = page;\r\n      this.getAll()\r\n    },\r\n    getAll() {\r\n      console.log(this.builUrl ())\r\n       this.$request.get(this.builUrl ()).then((res) => {\r\n        this.products = res.data;\r\n        // sort price\r\n        // this.products = this.products.sort((a, b) => a.price - b.price);\r\n        // sort reverse\r\n        this.products = this.products.reverse();\r\n      //   return this.products.filter((product) => {\r\n      //   return product.name.toLowerCase().includes(this.search.toLowerCase());\r\n\r\n      // });\r\n       });\r\n\r\n       \r\n  \r\n  },\r\n\r\n    builUrl () {\r\n      // let p = this.params;\r\n      // return `http://localhost:8000/api/products?page=${p.page}&per_page=${p.per_page}&sort_column=${p.sort_column}&direction=${p.direction}&search_column=${p.search_column}&search_operator=${p.search_operator}&search_query_1=${p.search_query_1}&search_query_2=${p.search_query_2}`;\r\n      return `http://localhost:8000/api/products`;\r\n    },\r\n    onDelete(productId) {\r\n      this.$swal\r\n        .fire({\r\n          title: \"Delete?\",\r\n          text: \"You won't be able to revert this!\",\r\n          icon: \"question\",\r\n          type: \"warning\",\r\n          showDenyButton: false,\r\n          showCancelButton: true,\r\n          confirmButtonColor: \"#3085d6\",\r\n          cancelButtonColor: \"#d33\",\r\n          confirmButtonText: \"Yes, delete it!\",\r\n          cancelButtonText: \"No, cancel please!\",\r\n          timer: 5000,\r\n          // closeOnConfirm: false,\r\n          // closeOnCancel: false\r\n        })\r\n        .then((result) => {\r\n          if (result.isConfirmed) {\r\n            this.$request\r\n              .delete(`http://localhost:8000/api/products/${productId}`)\r\n              .then((res) => {\r\n                if (res.data.success) {\r\n                  this.$swal.fire(\"Đã Xóa\", \"\", \"success\");\r\n                  this.getAll();\r\n                }\r\n              });\r\n          }\r\n        });\r\n    },\r\n    sort: function (s) {\r\n      // if s == current sort, reverse\r\n      if (s === this.currentSort) {\r\n        this.currentSortDir = this.currentSortDir === \"asc\" ? \"desc\" : \"asc\";\r\n      }\r\n      this.currentSort = s;\r\n    },\r\n    changeCurrentDir() {\r\n      this.currentSortDir = -this.currentSortDir;\r\n    },\r\n    // setTimeout(changeCurrentDir, 1000)\r\n  },\r\n  watch: {\r\n    currentSortDir(value) {\r\n      console.log(this.products);\r\n      this.products.sort((a, b) => this.currentSortDir);\r\n    },\r\n  },\r\n  computed: {\r\n    getFilter() {\r\n      // showFilter () {\r\n        return this.products.filter((post) => {\r\n          return ( post.name.toLowerCase().includes(this.search.toLowerCase()) && (post.price >= this.minprice && post.price <= this.maxprice));\r\n\r\n\r\n      });\r\n    // },\r\n    \r\n  },\r\n    // filteredList () {\r\n    //   return this.products.filter((post) => {\r\n    //     return post.name.toLowerCase().includes(this.search.toLowerCase());\r\n\r\n    //   },\r\n    //   // this.getAll()\r\n    //   );\r\n      \r\n    // },\r\n    \r\n  },  // components: { HeaderApp },\r\n};\r\n</script>\r\n<style>\r\ntable {\r\n  border-radius: 6px;\r\n}\r\ntable td,\r\ntable th {\r\n  border: 1px solid #f5f5f5;\r\n}\r\ntable th {\r\n  background: var(--primary) !important;\r\n  color: var(--white);\r\n}\r\n\r\n.pagination li, .page-item{\r\n  background: var(--white);\r\n  height: 30px;\r\n  width: 30px;\r\n  font-weight: 30px;\r\n  vertical-align: middle;\r\n  border: 1px solid #000;\r\n}\r\n\r\n.page-item.active {\r\n  background: var(--primary);\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}