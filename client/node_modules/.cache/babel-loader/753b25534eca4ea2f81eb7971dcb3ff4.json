{"ast":null,"code":"import globalState, { restoreActiveElement } from '../globalState.js';\nimport { removeKeydownHandler } from '../keydown-handler.js';\nimport privateMethods from '../privateMethods.js';\nimport privateProps from '../privateProps.js';\nimport { unsetAriaHidden } from '../utils/aria.js';\nimport { swalClasses } from '../utils/classes.js';\nimport * as dom from '../utils/dom/index.js';\nimport { undoIOSfix } from '../utils/iosFix.js';\nimport { undoScrollbar } from '../utils/scrollbarFix.js';\n/*\n * Instance method to close sweetAlert\n */\n\nfunction removePopupAndResetState(instance, container, returnFocus, didClose) {\n  if (dom.isToast()) {\n    triggerDidCloseAndDispose(instance, didClose);\n  } else {\n    restoreActiveElement(returnFocus).then(() => triggerDidCloseAndDispose(instance, didClose));\n    removeKeydownHandler(globalState);\n  }\n\n  const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent); // workaround for #2088\n  // for some reason removing the container in Safari will scroll the document to bottom\n\n  if (isSafari) {\n    container.setAttribute('style', 'display:none !important');\n    container.removeAttribute('class');\n    container.innerHTML = '';\n  } else {\n    container.remove();\n  }\n\n  if (dom.isModal()) {\n    undoScrollbar();\n    undoIOSfix();\n    unsetAriaHidden();\n  }\n\n  removeBodyClasses();\n}\n\nfunction removeBodyClasses() {\n  dom.removeClass([document.documentElement, document.body], [swalClasses.shown, swalClasses['height-auto'], swalClasses['no-backdrop'], swalClasses['toast-shown']]);\n}\n\nexport function close(resolveValue) {\n  resolveValue = prepareResolveValue(resolveValue);\n  const swalPromiseResolve = privateMethods.swalPromiseResolve.get(this);\n  const didClose = triggerClosePopup(this);\n\n  if (this.isAwaitingPromise()) {\n    // A swal awaiting for a promise (after a click on Confirm or Deny) cannot be dismissed anymore #2335\n    if (!resolveValue.isDismissed) {\n      handleAwaitingPromise(this);\n      swalPromiseResolve(resolveValue);\n    }\n  } else if (didClose) {\n    // Resolve Swal promise\n    swalPromiseResolve(resolveValue);\n  }\n}\nexport function isAwaitingPromise() {\n  return !!privateProps.awaitingPromise.get(this);\n}\n\nconst triggerClosePopup = instance => {\n  const popup = dom.getPopup();\n\n  if (!popup) {\n    return false;\n  }\n\n  const innerParams = privateProps.innerParams.get(instance);\n\n  if (!innerParams || dom.hasClass(popup, innerParams.hideClass.popup)) {\n    return false;\n  }\n\n  dom.removeClass(popup, innerParams.showClass.popup);\n  dom.addClass(popup, innerParams.hideClass.popup);\n  const backdrop = dom.getContainer();\n  dom.removeClass(backdrop, innerParams.showClass.backdrop);\n  dom.addClass(backdrop, innerParams.hideClass.backdrop);\n  handlePopupAnimation(instance, popup, innerParams);\n  return true;\n};\n\nexport function rejectPromise(error) {\n  const rejectPromise = privateMethods.swalPromiseReject.get(this);\n  handleAwaitingPromise(this);\n\n  if (rejectPromise) {\n    // Reject Swal promise\n    rejectPromise(error);\n  }\n}\nexport const handleAwaitingPromise = instance => {\n  if (instance.isAwaitingPromise()) {\n    privateProps.awaitingPromise.delete(instance); // The instance might have been previously partly destroyed, we must resume the destroy process in this case #2335\n\n    if (!privateProps.innerParams.get(instance)) {\n      instance._destroy();\n    }\n  }\n};\n\nconst prepareResolveValue = resolveValue => {\n  // When user calls Swal.close()\n  if (typeof resolveValue === 'undefined') {\n    return {\n      isConfirmed: false,\n      isDenied: false,\n      isDismissed: true\n    };\n  }\n\n  return Object.assign({\n    isConfirmed: false,\n    isDenied: false,\n    isDismissed: false\n  }, resolveValue);\n};\n\nconst handlePopupAnimation = (instance, popup, innerParams) => {\n  const container = dom.getContainer(); // If animation is supported, animate\n\n  const animationIsSupported = dom.animationEndEvent && dom.hasCssAnimation(popup);\n\n  if (typeof innerParams.willClose === 'function') {\n    innerParams.willClose(popup);\n  }\n\n  if (animationIsSupported) {\n    animatePopup(instance, popup, container, innerParams.returnFocus, innerParams.didClose);\n  } else {\n    // Otherwise, remove immediately\n    removePopupAndResetState(instance, container, innerParams.returnFocus, innerParams.didClose);\n  }\n};\n\nconst animatePopup = (instance, popup, container, returnFocus, didClose) => {\n  globalState.swalCloseEventFinishedCallback = removePopupAndResetState.bind(null, instance, container, returnFocus, didClose);\n  popup.addEventListener(dom.animationEndEvent, function (e) {\n    if (e.target === popup) {\n      globalState.swalCloseEventFinishedCallback();\n      delete globalState.swalCloseEventFinishedCallback;\n    }\n  });\n};\n\nconst triggerDidCloseAndDispose = (instance, didClose) => {\n  setTimeout(() => {\n    if (typeof didClose === 'function') {\n      didClose.bind(instance.params)();\n    }\n\n    instance._destroy();\n  });\n};\n\nexport { close as closePopup, close as closeModal, close as closeToast };","map":{"version":3,"names":["globalState","restoreActiveElement","removeKeydownHandler","privateMethods","privateProps","unsetAriaHidden","swalClasses","dom","undoIOSfix","undoScrollbar","removePopupAndResetState","instance","container","returnFocus","didClose","isToast","triggerDidCloseAndDispose","then","isSafari","test","navigator","userAgent","setAttribute","removeAttribute","innerHTML","remove","isModal","removeBodyClasses","removeClass","document","documentElement","body","shown","close","resolveValue","prepareResolveValue","swalPromiseResolve","get","triggerClosePopup","isAwaitingPromise","isDismissed","handleAwaitingPromise","awaitingPromise","popup","getPopup","innerParams","hasClass","hideClass","showClass","addClass","backdrop","getContainer","handlePopupAnimation","rejectPromise","error","swalPromiseReject","delete","_destroy","isConfirmed","isDenied","Object","assign","animationIsSupported","animationEndEvent","hasCssAnimation","willClose","animatePopup","swalCloseEventFinishedCallback","bind","addEventListener","e","target","setTimeout","params","closePopup","closeModal","closeToast"],"sources":["E:/Behemoth/Project/node_modules/sweetalert2/src/instanceMethods/close.js"],"sourcesContent":["import globalState, { restoreActiveElement } from '../globalState.js'\nimport { removeKeydownHandler } from '../keydown-handler.js'\nimport privateMethods from '../privateMethods.js'\nimport privateProps from '../privateProps.js'\nimport { unsetAriaHidden } from '../utils/aria.js'\nimport { swalClasses } from '../utils/classes.js'\nimport * as dom from '../utils/dom/index.js'\nimport { undoIOSfix } from '../utils/iosFix.js'\nimport { undoScrollbar } from '../utils/scrollbarFix.js'\n\n/*\n * Instance method to close sweetAlert\n */\n\nfunction removePopupAndResetState(instance, container, returnFocus, didClose) {\n  if (dom.isToast()) {\n    triggerDidCloseAndDispose(instance, didClose)\n  } else {\n    restoreActiveElement(returnFocus).then(() => triggerDidCloseAndDispose(instance, didClose))\n    removeKeydownHandler(globalState)\n  }\n\n  const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n  // workaround for #2088\n  // for some reason removing the container in Safari will scroll the document to bottom\n  if (isSafari) {\n    container.setAttribute('style', 'display:none !important')\n    container.removeAttribute('class')\n    container.innerHTML = ''\n  } else {\n    container.remove()\n  }\n\n  if (dom.isModal()) {\n    undoScrollbar()\n    undoIOSfix()\n    unsetAriaHidden()\n  }\n\n  removeBodyClasses()\n}\n\nfunction removeBodyClasses() {\n  dom.removeClass(\n    [document.documentElement, document.body],\n    [swalClasses.shown, swalClasses['height-auto'], swalClasses['no-backdrop'], swalClasses['toast-shown']]\n  )\n}\n\nexport function close(resolveValue) {\n  resolveValue = prepareResolveValue(resolveValue)\n\n  const swalPromiseResolve = privateMethods.swalPromiseResolve.get(this)\n\n  const didClose = triggerClosePopup(this)\n\n  if (this.isAwaitingPromise()) {\n    // A swal awaiting for a promise (after a click on Confirm or Deny) cannot be dismissed anymore #2335\n    if (!resolveValue.isDismissed) {\n      handleAwaitingPromise(this)\n      swalPromiseResolve(resolveValue)\n    }\n  } else if (didClose) {\n    // Resolve Swal promise\n    swalPromiseResolve(resolveValue)\n  }\n}\n\nexport function isAwaitingPromise() {\n  return !!privateProps.awaitingPromise.get(this)\n}\n\nconst triggerClosePopup = (instance) => {\n  const popup = dom.getPopup()\n\n  if (!popup) {\n    return false\n  }\n\n  const innerParams = privateProps.innerParams.get(instance)\n  if (!innerParams || dom.hasClass(popup, innerParams.hideClass.popup)) {\n    return false\n  }\n\n  dom.removeClass(popup, innerParams.showClass.popup)\n  dom.addClass(popup, innerParams.hideClass.popup)\n\n  const backdrop = dom.getContainer()\n  dom.removeClass(backdrop, innerParams.showClass.backdrop)\n  dom.addClass(backdrop, innerParams.hideClass.backdrop)\n\n  handlePopupAnimation(instance, popup, innerParams)\n\n  return true\n}\n\nexport function rejectPromise(error) {\n  const rejectPromise = privateMethods.swalPromiseReject.get(this)\n  handleAwaitingPromise(this)\n  if (rejectPromise) {\n    // Reject Swal promise\n    rejectPromise(error)\n  }\n}\n\nexport const handleAwaitingPromise = (instance) => {\n  if (instance.isAwaitingPromise()) {\n    privateProps.awaitingPromise.delete(instance)\n    // The instance might have been previously partly destroyed, we must resume the destroy process in this case #2335\n    if (!privateProps.innerParams.get(instance)) {\n      instance._destroy()\n    }\n  }\n}\n\nconst prepareResolveValue = (resolveValue) => {\n  // When user calls Swal.close()\n  if (typeof resolveValue === 'undefined') {\n    return {\n      isConfirmed: false,\n      isDenied: false,\n      isDismissed: true,\n    }\n  }\n\n  return Object.assign(\n    {\n      isConfirmed: false,\n      isDenied: false,\n      isDismissed: false,\n    },\n    resolveValue\n  )\n}\n\nconst handlePopupAnimation = (instance, popup, innerParams) => {\n  const container = dom.getContainer()\n  // If animation is supported, animate\n  const animationIsSupported = dom.animationEndEvent && dom.hasCssAnimation(popup)\n\n  if (typeof innerParams.willClose === 'function') {\n    innerParams.willClose(popup)\n  }\n\n  if (animationIsSupported) {\n    animatePopup(instance, popup, container, innerParams.returnFocus, innerParams.didClose)\n  } else {\n    // Otherwise, remove immediately\n    removePopupAndResetState(instance, container, innerParams.returnFocus, innerParams.didClose)\n  }\n}\n\nconst animatePopup = (instance, popup, container, returnFocus, didClose) => {\n  globalState.swalCloseEventFinishedCallback = removePopupAndResetState.bind(\n    null,\n    instance,\n    container,\n    returnFocus,\n    didClose\n  )\n  popup.addEventListener(dom.animationEndEvent, function (e) {\n    if (e.target === popup) {\n      globalState.swalCloseEventFinishedCallback()\n      delete globalState.swalCloseEventFinishedCallback\n    }\n  })\n}\n\nconst triggerDidCloseAndDispose = (instance, didClose) => {\n  setTimeout(() => {\n    if (typeof didClose === 'function') {\n      didClose.bind(instance.params)()\n    }\n    instance._destroy()\n  })\n}\n\nexport { close as closePopup, close as closeModal, close as closeToast }\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}