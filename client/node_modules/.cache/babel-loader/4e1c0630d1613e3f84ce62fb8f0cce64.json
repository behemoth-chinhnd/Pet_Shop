{"ast":null,"code":"import Paginate from \"vuejs-paginate\";\nexport default {\n  name: \"ProductForm\",\n  components: {\n    Paginate\n  },\n\n  data() {\n    return {\n      search: {\n        author: \"\",\n        name: \"\",\n        minprice: \"\",\n        maxprice: \"\"\n      },\n      products: [],\n      // List: [],\n      page: {\n        pageCount: 0,\n        count: 1,\n        per_page: 5\n      },\n      currentSort: \"time\",\n      currentSortDir: 1,\n      title: \"product\",\n      showFilter: false,\n      filters: [\"id\", \"name\", \"price\", \"time\"],\n      nPage: [],\n      operators: {\n        equal_to: \"=\",\n        less_than: \"<\",\n        greater_than: \">\",\n        like: \"LIKE\",\n        in: \"IN\",\n        not_in: \"NOT_IN\",\n        between: \"BETWEEN\"\n      },\n      params: {\n        page: 1,\n        per_page: 1,\n        sort_column: \"id\",\n        direction: \"desc\",\n        search_column: \"id\",\n        search_operator: \"equal_to\",\n        search_query_1: \"\",\n        search_query_2: \"\"\n      }\n    };\n  },\n\n  props: {},\n\n  created() {\n    this.getAll();\n  },\n\n  mounted() {},\n\n  methods: {\n    clickCallback(pageNum) {\n      this.page.pageCount = pageNum - 1; // this.params.page = pageNum;\n      // this.getAll();\n      // console.log(pageNum)\n    },\n\n    prev() {\n      if (this.model.prev_page_url) {\n        this.params.page--;\n        this.getAll();\n      }\n    },\n\n    next() {\n      if (this.model.next_page_url) {\n        this.params.page--;\n        this.getAll();\n      }\n    },\n\n    // changePage (page){\n    //   this.page.pageCount = page;\n    //   // this.getAll()\n    // },\n    async getAll() {\n      // console.log(this.builUrl());\n      await this.$request.get(this.builUrl()).then(res => {\n        this.products = res.data; // sort price\n        // this.products = this.products.sort((a, b) => a.price - b.price);\n        // sort reverse\n\n        this.products = this.products.reverse(); // this.products.time = this.products.time.getUTCMilliseconds();\n      });\n    },\n\n    builUrl() {\n      // let p = this.params;\n      // return `http://localhost:8000/api/products?page=${p.page}&per_page=${p.per_page}&sort_column=${p.sort_column}&direction=${p.direction}&search_column=${p.search_column}&search_operator=${p.search_operator}&search_query_1=${p.search_query_1}&search_query_2=${p.search_query_2}`;\n      return `http://localhost:8000/api/products`;\n    },\n\n    onDelete(productId) {\n      this.$swal.fire({\n        title: \"Delete?\",\n        text: \"You won't be able to revert this!\",\n        icon: \"question\",\n        type: \"warning\",\n        showDenyButton: false,\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Yes, delete it!\",\n        cancelButtonText: \"No, cancel please!\",\n        timer: 5000 // closeOnConfirm: false,\n        // closeOnCancel: false\n\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.$request.delete(`http://localhost:8000/api/products/${productId}`).then(res => {\n            if (res.data.success) {\n              this.$swal.fire(\"Đã Xóa\", \"\", \"success\");\n              this.getAll();\n            }\n          });\n        }\n      }); // });\n      // let test ;\n      // const url = `http://localhost:8000/api/products/${productId}`\n      // fetch(url , { method: 'DELETE'}).then(res =>test = res.ok)\n      // if (test){\n      //   this.p\n      // }\n    },\n\n    sort: function (s) {\n      if (s === this.currentSort) {\n        this.currentSortDir = this.currentSortDir === \"asc\" ? \"desc\" : \"asc\";\n      }\n\n      this.currentSort = s;\n    },\n\n    changeCurrentDir() {\n      this.currentSortDir = -this.currentSortDir;\n    }\n\n  },\n  watch: {\n    currentSortDir(value) {\n      console.log(this.products);\n      this.products.sort((a, b) => this.currentSortDir);\n    }\n\n  },\n  computed: {\n    getFilter() {\n      // this.getAll()\n      return this.products.filter(post => {\n        if (this.search.minprice === \"\" && this.search.maxprice === \"\") {\n          return post.name.toLowerCase().includes(this.search.name.toLowerCase()) && post.author.toLowerCase().includes(this.search.author.toLowerCase()) && post.price >= 0;\n        } else if (this.search.minprice != \"\" && this.search.maxprice === \"\") {\n          return post.name.toLowerCase().includes(this.search.name.toLowerCase()) && post.author.toLowerCase().includes(this.search.author.toLowerCase()) && post.price >= this.search.minprice;\n        } else if (this.search.minprice === \"\" && this.search.maxprice != \"\") {\n          return post.name.toLowerCase().includes(this.search.name.toLowerCase()) && post.author.toLowerCase().includes(this.search.author.toLowerCase()) && post.price >= 0 && post.price <= this.search.maxprice;\n        } else if (this.minprice != \"\" && this.maxprice != \"\") {\n          return post.name.toLowerCase().includes(this.search.name.toLowerCase()) && post.author.toLowerCase().includes(this.search.author.toLowerCase()) && post.price >= this.search.minprice && post.price <= this.search.maxprice;\n        }\n      }); // },\n    },\n\n    List() {\n      if (this.getFilter.length % this.page.per_page === 0) {\n        this.page.count = Math.floor(this.getFilter.length / this.page.per_page);\n      } else if (this.getFilter.length <= this.page.per_page) {\n        this.page.count = Math.floor(this.getFilter.length / this.page.per_page + 1);\n        this.page.pageCount = 0;\n      } else if (this.page.pageCount > this.page.count - 1) {\n        this.page.count = Math.floor(this.getFilter.length / this.page.per_page) + 1;\n        this.page.pageCount = 0;\n      } else {\n        this.page.count = Math.floor(this.getFilter.length / this.page.per_page + 1);\n      }\n\n      return this.getFilter.slice(this.page.per_page * this.page.pageCount, this.page.per_page * (this.page.pageCount + 1));\n    }\n\n  } // components: { HeaderApp },\n\n};","map":{"version":3,"mappings":"AAiFA;AACA;EACAA,mBADA;EAEAC;IACAC;EADA,CAFA;;EAKAC;IACA;MACAC;QACAC,UADA;QAEAL,QAFA;QAGAM,YAHA;QAIAC;MAJA,CADA;MAOAC,YAPA;MAQA;MACAC;QACAC,YADA;QAEAC,QAFA;QAGAC;MAHA,CATA;MAcAC,mBAdA;MAeAC,iBAfA;MAgBAC,gBAhBA;MAiBAC,iBAjBA;MAkBAC,wCAlBA;MAmBAC,SAnBA;MAoBAC;QACAC,aADA;QAEAC,cAFA;QAGAC,iBAHA;QAIAC,YAJA;QAKAC,QALA;QAMAC,gBANA;QAOAC;MAPA,CApBA;MA6BAC;QACAlB,OADA;QAEAG,WAFA;QAGAgB,iBAHA;QAIAC,iBAJA;QAKAC,mBALA;QAMAC,2BANA;QAOAC,kBAPA;QAQAC;MARA;IA7BA;EAwCA,CA9CA;;EA+CAC,SA/CA;;EAgDAC;IACA;EACA,CAlDA;;EAoDAC,YApDA;;EAqDAC;IACAC;MACA,kCADA,CAGA;MACA;MACA;IACA,CAPA;;IAQAC;MACA;QACA;QACA;MACA;IACA,CAbA;;IAcAC;MACA;QACA;QACA;MACA;IACA,CAnBA;;IAoBA;IACA;IACA;IACA;IACA;MACA;MACA;QACA,yBADA,CAEA;QACA;QACA;;QACA,wCALA,CAMA;MACA,CAPA;IAQA,CAlCA;;IAmCAC;MACA;MACA;MACA;IACA,CAvCA;;IAwCAC;MACA,WACAC,IADA,CACA;QACA5B,gBADA;QAEA6B,yCAFA;QAGAC,gBAHA;QAIAC,eAJA;QAKAC,qBALA;QAMAC,sBANA;QAOAC,6BAPA;QAQAC,yBARA;QASAC,oCATA;QAUAC,sCAVA;QAWAC,WAXA,CAYA;QACA;;MAbA,CADA,EAgBAC,IAhBA,CAgBAC;QACA;UACA,cACAC,MADA,CACA,iDADA,EAEAF,IAFA,CAEAG;YACA;cACA;cACA;YACA;UACA,CAPA;QAQA;MACA,CA3BA,EADA,CA6BA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CA5EA;;IA6EAC;MACA;QACA;MACA;;MACA;IACA,CAlFA;;IAmFAC;MACA;IACA;;EArFA,CArDA;EA4IAC;IACA9C;MACA+C;MACA;IACA;;EAJA,CA5IA;EAkJAC;IACAC;MACA;MACA;QACA;UACA,OACAC,oEACAA,oEADA,IAEAA,eAHA;QAKA,CANA,MAMA;UACA,OACAA,oEACAA,oEADA,IAEAA,kCAHA;QAKA,CANA,MAMA;UACA,OACAA,oEACAA,oEADA,IAEAA,eAFA,IAGAA,kCAJA;QAMA,CAPA,MAOA;UACA,OACAA,oEACAA,oEADA,IAEAA,kCAFA,IAGAA,kCAJA;QAMA;MACA,CA5BA,EAFA,CAgCA;IACA,CAlCA;;IAoCAC;MACA;QACA;MACA,CAFA,MAEA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA,CAHA,MAGA;QACA;MACA;;MACA,4BACA,wCADA,EAEA,8CAFA;IAIA;;EApDA,CAlJA,CAuMA;;AAvMA","names":["name","components","Paginate","data","search","author","minprice","maxprice","products","page","pageCount","count","per_page","currentSort","currentSortDir","title","showFilter","filters","nPage","operators","equal_to","less_than","greater_than","like","in","not_in","between","params","sort_column","direction","search_column","search_operator","search_query_1","search_query_2","props","created","mounted","methods","clickCallback","prev","next","builUrl","onDelete","fire","text","icon","type","showDenyButton","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","timer","then","result","delete","res","sort","changeCurrentDir","watch","console","computed","getFilter","post","List"],"sourceRoot":"src/views/client/products","sources":["ListProducts.vue"],"sourcesContent":["<template>\n    <div class=\"body\">\n        <main id=\"main\" class=\"\">\n\n            <!-- <section id=\"main-body\"> -->\n            <div class=\"container bg-white\">\n                <div class=\"panel-body flex-row-space-between-center\">\n                    <div class=\"btn\">\n                        <button class=\"btn btn-primary text-white\">\n                            <router-link to=\"/admin/management/products\">Product</router-link>\n                        </button>\n                    </div>\n                    <div class=\"btn\">\n                        <button class=\"btn btn-primary text-white\">\n                            <router-link to=\"/admin/management/products/create\">Add New</router-link>\n                        </button>\n\n                        <button @click=\"showFilter = !showFilter\" class=\"btn btn-info btn-sm mgl-10px text-white\">\n                            <i class=\"fa fa-search\"></i>\n                        </button>\n                    </div>\n                </div>\n                <div v-if=\"showFilter\" class=\"filter flex-row-space-between-center\">\n                    <div class=\"search-wrapper\">\n                        <div class=\"row\">\n                            <div class=\"col-md-3\">\n                                <input class=\"form-control\" type=\"text\" v-model=\"search.name\"\n                                    placeholder=\"Search Name\" />\n                            </div>\n                            <div class=\"col-md-3\">\n                                <input class=\"form-control\" type=\"text\" v-model.number=\"search.minprice\"\n                                    placeholder=\"Min Price\" />\n                            </div>\n\n                            <div class=\"col-md-3\">\n                                <input class=\"form-control\" type=\"text\" v-model.number=\"search.maxprice\"\n                                    placeholder=\"Max Price..\" />\n                            </div>\n                            <div class=\"col-md-3\">\n                                <input class=\"form-control\" type=\"text\" v-model=\"search.author\" placeholder=\"Author\" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"card-deck mb-3 text-center scroll-x\">\n\n                    <div class=\"cards\" >\n                        <div class=\"card\" v-for=\"(post, index) in List\" :key=\"index\" >\n                            <router-link\n                    :to=\"{\n                      name: 'admin.management.products.edit',\n                      params: { id: post.id },\n                    }\"\n                  >\n                  </router-link>\n                            <img class=\"img-card\" src=\"@/assets/images/products/gai-xinh-1.jpg\" alt=\"\">\n                            <div class=\"card-top\">\n                                <span class=\"item-1\">{{ post.pid }} {{ post.name }}</span>\n                                <!-- <span class=\"item-2\">{{ post.price }}</span> -->\n                            </div>\n                            <div class=\"card-bottom flex-row-space-between\">\n                                <div>VND: {{ post.price }}</div>\n                                <div>Buy: 289</div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n                <div v-if=\"this.page.count > 1\" class=\"panel-footer\">\n                    <paginate v-model=\"params.page\" :page-count=\"this.page.count\" :page-range=\"3\" :margin-pages=\"2\"\n                        :click-handler=\"clickCallback\" :prev-text=\"'<<'\" :next-text=\"'>>'\"\n                        :container-class=\"'pagination'\" :page-class=\"'page-item'\">\n                    </paginate>\n                </div>\n            </div>\n            <!-- </section> -->\n        </main>\n    </div>\n</template>\n<script>\nimport Paginate from \"vuejs-paginate\";\nexport default {\n    name: \"ProductForm\",\n    components: {\n        Paginate,\n    },\n    data() {\n        return {\n            search: {\n                author: \"\",\n                name: \"\",\n                minprice: \"\",\n                maxprice: \"\",\n            },\n            products: [],\n            // List: [],\n            page: {\n                pageCount: 0,\n                count: 1,\n                per_page: 5,\n            },\n            currentSort: \"time\",\n            currentSortDir: 1,\n            title: \"product\",\n            showFilter: false,\n            filters: [\"id\", \"name\", \"price\", \"time\"],\n            nPage: [],\n            operators: {\n                equal_to: \"=\",\n                less_than: \"<\",\n                greater_than: \">\",\n                like: \"LIKE\",\n                in: \"IN\",\n                not_in: \"NOT_IN\",\n                between: \"BETWEEN\",\n            },\n            params: {\n                page: 1,\n                per_page: 1,\n                sort_column: \"id\",\n                direction: \"desc\",\n                search_column: \"id\",\n                search_operator: \"equal_to\",\n                search_query_1: \"\",\n                search_query_2: \"\",\n            },\n        };\n    },\n    props: {},\n    created() {\n        this.getAll();\n    },\n\n    mounted() { },\n    methods: {\n        clickCallback(pageNum) {\n            this.page.pageCount = pageNum - 1;\n\n            // this.params.page = pageNum;\n            // this.getAll();\n            // console.log(pageNum)\n        },\n        prev() {\n            if (this.model.prev_page_url) {\n                this.params.page--;\n                this.getAll();\n            }\n        },\n        next() {\n            if (this.model.next_page_url) {\n                this.params.page--;\n                this.getAll();\n            }\n        },\n        // changePage (page){\n        //   this.page.pageCount = page;\n        //   // this.getAll()\n        // },\n        async getAll() {\n            // console.log(this.builUrl());\n            await this.$request.get(this.builUrl()).then((res) => {\n                this.products = res.data;\n                // sort price\n                // this.products = this.products.sort((a, b) => a.price - b.price);\n                // sort reverse\n                this.products = this.products.reverse();\n                // this.products.time = this.products.time.getUTCMilliseconds();\n            });\n        },\n        builUrl() {\n            // let p = this.params;\n            // return `http://localhost:8000/api/products?page=${p.page}&per_page=${p.per_page}&sort_column=${p.sort_column}&direction=${p.direction}&search_column=${p.search_column}&search_operator=${p.search_operator}&search_query_1=${p.search_query_1}&search_query_2=${p.search_query_2}`;\n            return `http://localhost:8000/api/products`;\n        },\n        onDelete(productId) {\n            this.$swal\n                .fire({\n                    title: \"Delete?\",\n                    text: \"You won't be able to revert this!\",\n                    icon: \"question\",\n                    type: \"warning\",\n                    showDenyButton: false,\n                    showCancelButton: true,\n                    confirmButtonColor: \"#3085d6\",\n                    cancelButtonColor: \"#d33\",\n                    confirmButtonText: \"Yes, delete it!\",\n                    cancelButtonText: \"No, cancel please!\",\n                    timer: 5000,\n                    // closeOnConfirm: false,\n                    // closeOnCancel: false\n                })\n                .then((result) => {\n                    if (result.isConfirmed) {\n                        this.$request\n                            .delete(`http://localhost:8000/api/products/${productId}`)\n                            .then((res) => {\n                                if (res.data.success) {\n                                    this.$swal.fire(\"Đã Xóa\", \"\", \"success\");\n                                    this.getAll();\n                                }\n                            });\n                    }\n                });\n            // });\n            // let test ;\n            // const url = `http://localhost:8000/api/products/${productId}`\n            // fetch(url , { method: 'DELETE'}).then(res =>test = res.ok)\n            // if (test){\n            //   this.p\n            // }\n        },\n        sort: function (s) {\n            if (s === this.currentSort) {\n                this.currentSortDir = this.currentSortDir === \"asc\" ? \"desc\" : \"asc\";\n            }\n            this.currentSort = s;\n        },\n        changeCurrentDir() {\n            this.currentSortDir = -this.currentSortDir;\n        },\n    },\n    watch: {\n        currentSortDir(value) {\n            console.log(this.products);\n            this.products.sort((a, b) => this.currentSortDir);\n        },\n    },\n    computed: {\n        getFilter() {\n            // this.getAll()\n            return this.products.filter((post) => {\n                if (this.search.minprice === \"\" && this.search.maxprice === \"\") {\n                    return (\n                        post.name.toLowerCase().includes(this.search.name.toLowerCase()) &&\n                        post.author.toLowerCase().includes(this.search.author.toLowerCase()) &&\n                        post.price >= 0\n                    );\n                } else if (this.search.minprice != \"\" && this.search.maxprice === \"\") {\n                    return (\n                        post.name.toLowerCase().includes(this.search.name.toLowerCase()) &&\n                        post.author.toLowerCase().includes(this.search.author.toLowerCase()) &&\n                        post.price >= this.search.minprice\n                    );\n                } else if (this.search.minprice === \"\" && this.search.maxprice != \"\") {\n                    return (\n                        post.name.toLowerCase().includes(this.search.name.toLowerCase()) &&\n                        post.author.toLowerCase().includes(this.search.author.toLowerCase()) &&\n                        post.price >= 0 &&\n                        post.price <= this.search.maxprice\n                    );\n                } else if (this.minprice != \"\" && this.maxprice != \"\") {\n                    return (\n                        post.name.toLowerCase().includes(this.search.name.toLowerCase()) &&\n                        post.author.toLowerCase().includes(this.search.author.toLowerCase()) &&\n                        post.price >= this.search.minprice &&\n                        post.price <= this.search.maxprice\n                    );\n                }\n            });\n\n            // },\n        },\n\n        List() {\n            if (this.getFilter.length % this.page.per_page === 0) {\n                this.page.count = Math.floor(this.getFilter.length / this.page.per_page);\n            } else if (this.getFilter.length <= this.page.per_page) {\n                this.page.count = Math.floor(this.getFilter.length / this.page.per_page + 1);\n                this.page.pageCount = 0;\n            } else if (this.page.pageCount > this.page.count - 1) {\n                this.page.count = Math.floor(this.getFilter.length / this.page.per_page) + 1;\n                this.page.pageCount = 0;\n            } else {\n                this.page.count = Math.floor(this.getFilter.length / this.page.per_page + 1);\n            }\n            return this.getFilter.slice(\n                this.page.per_page * this.page.pageCount,\n                this.page.per_page * (this.page.pageCount + 1)\n            );\n        },\n    }, // components: { HeaderApp },\n};\n</script>\n<style>\n@media screen and (min-width :1366px) {\n    .cards {\n        /* khi vào thực tế thay width bằng số khác tùy trường hợp cụ thể. */\n        --width: 100%;\n        width: var(--width);\n        margin: 0 auto;\n        --column: 4;\n    }\n}\n\n@media screen and (min-width :1024px) and (max-width :1366px) {\n    .cards {\n        --width: 97%;\n        width: var(--width);\n        margin: 0 auto;\n        --column: 3;\n    }\n}\n\n@media screen and (min-width :800px) and (max-width :1024px) {\n    .cards {\n        --width: 90%;\n        width: var(--width);\n        margin: 0 auto;\n        --column: 2;\n    }\n}\n\n@media screen and (min-width :683px) and (max-width :800px) {\n    .cards {\n        --width: 97%;\n        width: var(--width);\n        margin: 0 auto;\n        --column: 2;\n    }\n}\n\n@media screen and (min-width :500px) and (max-width :683px) {\n    .cards {\n        --width: 90%;\n        width: var(--width);\n        margin: 0 auto;\n        --column: 1;\n    }\n}\n\n@media screen and (min-width :0px) and (max-width :600px) {\n    .cards {\n        --width: 97%;\n        width: var(--width);\n        margin: 0 auto;\n        --column: 1;\n    }\n}\n\n\n.cards {\n    --padding-card: 15px;\n    display: flex;\n    flex-wrap: wrap;\n}\n\n.card {\n    cursor: pointer;\n    width: calc(100%/var(--column) - var(--padding-card));\n    overflow: hidden;\n    font-size: 13px;\n    background: var(--white);\n    color: var(--dark-2);\n    display: flex;\n    flex-direction: column;\n    margin: calc(var(--padding-card)/2);\n}\n\n.img-card {\n    height:200px;\n    width: 100%;\n}\n\n\n.card-top {\n    padding: 10px;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    margin-bottom: auto;\n}\n\n.item-1 {\n    flex: 1;\n    display: flex;\n    /* margin-bottom: 20px; */\n    /* word-break: break-all; */\n\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n}\n\n.item-2,\n.card-bottom {\n    flex-shrink: 0;\n    margin-top: auto;\n}\n\n.card-bottom {\n    padding: 10px;\n    background: var(--warning);\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n\n\n\n\n\n\n\n\n\n\n.pagination li,\n.page-item {\n    background: var(--white);\n    height: 30px;\n    width: 30px;\n    font-weight: 30px;\n    vertical-align: middle;\n    border: 1px solid #000;\n}\n\n.page-item.active {\n    background: var(--primary);\n}\n</style>\n  "]},"metadata":{},"sourceType":"module"}